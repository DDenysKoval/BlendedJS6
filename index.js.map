{"version":3,"file":"index.js","sources":["../src/js/refs.js","../src/js/products-api.js","../src/js/render-function.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["//Обʼєкт з посиланнями на ДОМ елементи\n\nexport const refs = {\n  form: document.querySelector(\".search-form\"),\n  categoriesList: document.querySelector(\".categories\"),\n  productsList: document.querySelector(\".products\"),\n  loadMore: document.querySelector(\".load-more-btn\"),\n  card: document.querySelector(\".products__item\"),\n};\n","// Функції для роботи з бекендом\nimport axios from \"axios\";\n\n\nexport async function getProductList() {\n  try {\n    const response = await axios.get(\"https://dummyjson.com/products/category-list\");\n    return response;\n  } catch(error) {\n    console.log(error.message);\n  }\n}\nexport const limit = 12;\n\nexport async function getAllProducts(currentPage) {\n  const params = {\n    limit,\n    skip: (currentPage - 1) * 12,\n    orientation: \"portrait\",\n  }\n  try {\n    const response = await axios.get(\"https://dummyjson.com/products/\", { params });\n    return response;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nexport async function getCategoryItems(category, currentPage) {\n  const params = {\n    limit: 12,\n    skip: (currentPage - 1) * 12,\n    orientation: \"portrait\",\n  }\n  try {\n    const response = await axios.get(`https://dummyjson.com/products/category/${category}`, { params });\n    return response;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n","//Функцію для створення, рендеру або видалення розмітки\nimport { refs } from \"./refs\";\n\nexport function createCategoriesMarkup(arr) {\n  arr.unshift(\"All\");\n  return arr.map(item => `\n    <li class=\"categories__item\">\n      <button class=\"categories__btn\" type=\"button\">${item}</button>\n    </li>`)\n    .join(\"\");\n}\n\nexport function createProductsMarkup(arr) {\n  return arr.map(product => `\n    <li class=\"products__item\" data-id=\"${product.id}\">\n      <img class=\"products__image\" src=\"${product.thumbnail}\" alt=\"${product.description}\"/>\n      <p class=\"products__title\">${product.title}</p>\n      <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: ${product.brand}</span></p>\n      <p class=\"products__category\">Category: ${product.category}  </p>\n      <p class=\"products__price\">Price: ${product.price}$</p>\n    </li>`)\n    .join(\"\");;\n}\n\nexport function hideLoadMoreBtn() {\n  refs.loadMore.classList.add(\"hidden\");\n}\n\nexport function showLoadMoreBtn() {\n  refs.loadMore.classList.remove(\"hidden\");\n}\n","// Функції, які передаються колбеками в addEventListners\nimport { getCategoryItems, getProductList } from \"./products-api\";\nimport { refs } from \"./refs\";\nimport { createCategoriesMarkup, hideLoadMoreBtn, showLoadMoreBtn } from \"./render-function\";\nimport { getAllProducts } from \"./products-api\";\nimport { createProductsMarkup } from \"./render-function\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { limit } from \"./products-api\";\n\nlet currentPage = 1;\nlet totalPages;\nlet category;\nlet inputData;\n\nexport async function renderPage() {\n  currentPage = 1;\n  hideLoadMoreBtn()\n  try {\n    \n    const productListResponse = await getProductList();\n    refs.categoriesList.innerHTML = createCategoriesMarkup(productListResponse.data);\n    \n    const allBtn = document.querySelector(\".categories__btn\");\n    allBtn.closest(\".categories__btn\").classList.add(\"categories__btn--active\");\n    category = \"All\";\n\n    const allProductResponse = await getAllProducts(currentPage);\n    if (allProductResponse.data.products === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images. Please try again!',\n      });\n      throw new Error(\"Sorry, there are no images. Please try again!\");\n    }\n    refs.productsList.innerHTML = createProductsMarkup(allProductResponse.data.products);\n    totalPages = Math.ceil(allProductResponse.data.total / limit);\n    console.log(totalPages);\n    \n\n    showLoadMoreBtn()\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nexport async function renderSelectCategory(e) {\n  hideLoadMoreBtn()\n  currentPage = 1;\n  const allButtons = document.querySelectorAll(\".categories__btn\")\n  allButtons.forEach(btn => btn.classList.remove(\"categories__btn--active\"));\n  if (e.target.nodeName !== \"BUTTON\") {\n    return;\n  }\n  category = e.target.textContent;\n  const selectedCategory = e.target.closest(\".categories__btn\");\n  selectedCategory.classList.add(\"categories__btn--active\");\n\n  try {\n    const response = await getCategoryItems(category, currentPage);\n    \n    refs.productsList.innerHTML = createProductsMarkup(response.data.products);\n    totalPages = Math.ceil(response.data.total / limit);\n    console.log(totalPages);\n    \n    if (category === \"All\") {\n      const response = await getAllProducts(currentPage);\n      refs.productsList.innerHTML = createProductsMarkup(response.data.products);\n    }\n    \n    showLoadMoreBtn();\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nexport async function renderLoadMore() {\n  currentPage += 1;\n  \n  hideLoadMoreBtn();\n  \n  try {\n    const card = document.querySelector(\".products__item\");\n    const cardHeight = card.getBoundingClientRect().height;\n    if (category === \"All\") {\n      const response = await getAllProducts(currentPage);\n      refs.productsList.insertAdjacentHTML(\"beforeend\", createProductsMarkup(response.data.products));\n      \n      window.scrollBy({\n        top: cardHeight,\n        behavior: \"smooth\"\n      })\n      showLoadMoreBtn();\n    }\n    const response = await getCategoryItems(category, currentPage);\n    refs.productsList.insertAdjacentHTML(\"beforeend\", createProductsMarkup(response.data.products));\n    window.scrollBy({\n      top: cardHeight,\n      behavior: \"smooth\"\n    })\n    showLoadMoreBtn()\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n","//Логіка сторінки Home\nimport { refs } from \"./js/refs\";\nimport { renderPage, renderSelectCategory, renderLoadMore } from \"./js/handlers\";\n\ndocument.addEventListener(\"DOMContentLoaded\", renderPage);\n\nrefs.categoriesList.addEventListener(\"click\", renderSelectCategory);\n\nrefs.loadMore.addEventListener(\"click\", renderLoadMore);"],"names":["refs","getProductList","axios","error","limit","getAllProducts","currentPage","params","getCategoryItems","category","createCategoriesMarkup","arr","item","createProductsMarkup","product","hideLoadMoreBtn","showLoadMoreBtn","totalPages","renderPage","productListResponse","allProductResponse","iziToast","renderSelectCategory","e","btn","response","renderLoadMore","cardHeight"],"mappings":"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"}